---
phase: 02-association-dashboard-view
plan: 03
type: execute
wave: 2
depends_on: ['02-01', '02-02']
files_modified: []
autonomous: false

must_haves:
  truths:
    - 'Association user can navigate between dedicated transactions page and team details transactions'
    - 'Both transaction views correctly enforce read-only access for association users'
    - 'Cursor pagination works correctly across team filtering changes'
    - "Receipt drawer displays receipts or 'No receipt' state correctly"
    - 'TeamFilter updates transaction list when team selection changes'
  artifacts: []
  key_links:
    - from: 'app/association/[associationId]/transactions/page.tsx'
      to: 'app/association/[associationId]/teams/[teamId]/page.tsx'
      via: 'Navigation and consistent UX'
      pattern: 'link.*teams.*teamId'
---

<objective>
Verify complete association transaction viewing functionality works correctly across both views with proper read-only enforcement and navigation.

Purpose: Ensure Phase 2 success criteria are fully met through human verification of functional behavior, navigation flows, and edge cases.

Output: Verified working system with documented test results confirming all Phase 2 requirements.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/phases/02-association-dashboard-view/02-CONTEXT.md

# Implemented plans

@.planning/phases/02-association-dashboard-view/02-01-SUMMARY.md
@.planning/phases/02-association-dashboard-view/02-02-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Two transaction viewing experiences for association users:
1. Dedicated association transactions page at `/association/[associationId]/transactions` with team filtering
2. Team details transaction section at `/association/[associationId]/teams/[teamId]` with pre-filtered transactions
  </what-built>

  <how-to-verify>
**Setup:**
1. Log in as association user (association president or treasurer role)
2. Ensure you have access to multiple teams with transactions

**Test 1: Association Transactions Page (dedicated view)**

Navigate to: `/association/[associationId]/transactions`

Verify:

1. [ ] Page loads without errors
2. [ ] Transaction table displays with columns: Date, Team, Vendor, Category, Amount, Receipt Status
3. [ ] Team column shows team names (distinguishes which team each transaction belongs to)
4. [ ] TeamFilter component visible and shows accessible teams
5. [ ] Initial view shows all teams' transactions (or defaults correctly)
6. [ ] Total transaction count displayed correctly
7. [ ] At least some transactions visible (if test data exists)

**Test 2: Team Filtering**

From association transactions page:

Verify:

1. [ ] Click TeamFilter dropdown - shows list of accessible teams
2. [ ] Select single team - transaction list updates to show only that team's transactions
3. [ ] Verify team name in table rows matches selected team
4. [ ] Select multiple teams - transaction list shows transactions from selected teams only
5. [ ] Select "All Teams" - transaction list shows all accessible team transactions
6. [ ] Transaction count updates correctly when filter changes

**Test 3: Cursor Pagination**

With transactions displayed:

Verify:

1. [ ] If more than 50 transactions exist, "Load More" button appears
2. [ ] Click "Load More" - additional transactions append to list
3. [ ] No duplicate transactions appear after loading more
4. [ ] Change team filter - pagination resets (shows first 50 of filtered set)

**Test 4: Transaction Details Drawer (association page)**

Click any transaction row:

Verify:

1. [ ] Drawer opens from right side
2. [ ] Transaction details displayed (date, vendor, amount, category)
3. [ ] If transaction has receipt: receipt preview shown
4. [ ] If no receipt: "No receipt attached" message shown (not upload button)
5. [ ] NO "Edit Transaction" button visible (read-only enforcement)
6. [ ] NO receipt upload button visible (read-only enforcement)
7. [ ] Can close drawer and select different transaction

**Test 5: Team Details Transaction Section**

Navigate to: `/association/[associationId]/teams/[teamId]` (pick any team)

Verify:

1. [ ] Team details page displays
2. [ ] Transaction section visible on page (may be in tab or scrollable section)
3. [ ] Transaction table shows ONLY transactions from this team
4. [ ] Team column NOT present in table (already in team context)
5. [ ] Table has columns: Date, Vendor, Category, Amount, Receipt Status
6. [ ] Transaction count accurate for this team

**Test 6: Navigation Between Views**

From team details transaction section:

Verify:

1. [ ] "View All Transactions" link or similar navigation present
2. [ ] Click link - navigates to association transactions page
3. [ ] Association transactions page opens with this team pre-selected in filter (if implemented)
4. [ ] Navigate back to team details - transaction section still works

**Test 7: Transaction Details Drawer (team details page)**

From team details transaction section, click any transaction:

Verify:

1. [ ] Drawer opens with same behavior as association page
2. [ ] Read-only enforcement (no edit button, no upload button)
3. [ ] Receipt viewing works same as association page
4. [ ] Drawer closes properly

**Test 8: Empty States and Edge Cases**

Test various scenarios:

Verify:

1. [ ] Team with zero transactions: Shows "No transactions found" message
2. [ ] Filter to team with no transactions: Shows empty state
3. [ ] Association with only one team: TeamFilter may not show (or shows single team)
4. [ ] Page loads even if no teams accessible (shows appropriate message)

**Test 9: Read-Only Enforcement (critical security check)**

Throughout both views:

Verify:

1. [ ] Cannot see "New Expense" or "New Income" buttons
2. [ ] Cannot see edit icons or buttons on transaction rows
3. [ ] Drawer never shows "Edit Transaction" button
4. [ ] Drawer never shows receipt upload interface for transactions without receipts
5. [ ] No mutation actions available anywhere in transaction views

**Test 10: Performance**

With multiple teams and transactions:

Verify:

1. [ ] Initial page load completes in reasonable time (<3 seconds)
2. [ ] Changing team filter feels responsive
3. [ ] Cursor pagination loads quickly
4. [ ] No console errors in browser DevTools
5. [ ] No network errors in Network tab

**Expected Results Summary:**

- Association transactions page shows all team transactions with team column
- Team details page shows only that team's transactions without team column
- Both views use cursor pagination (50 items per page)
- Both views enforce read-only access (no mutations visible)
- Team filtering works correctly and updates transaction list
- Drawers display receipts or "No receipt" state appropriately
- Navigation between views works smoothly
- Empty states handled gracefully
</how-to-verify>

  <resume-signal>
After completing verification tests, respond with ONE of:

1. "approved" - All tests passed, Phase 2 working as expected
2. "approved with notes: [describe minor issues that don't block completion]"
3. "issues found: [describe problems requiring fixes]"

If issues found, describe:

- Which test failed
- What was expected vs. what happened
- Any error messages or console output
- Whether issue blocks Phase 2 completion
  </resume-signal>
  </task>

</tasks>

<verification>
Human verification checkpoint ensures:
1. All VIEW-01 through VIEW-05 requirements met
2. All NAV-01 through NAV-04 requirements met
3. RECEIPT-01 and RECEIPT-06 requirements met
4. Read-only access properly enforced (VIEW-03, SEC-03)
5. Cursor pagination working (VIEW-05, PERF-02)
6. Navigation between views functional
</verification>

<success_criteria>

1. User confirms association transactions page displays correctly
2. User confirms team filtering works as expected
3. User confirms team details transaction section works
4. User confirms cursor pagination loads additional transactions
5. User confirms transaction drawer opens and displays receipts/no-receipt states
6. User confirms read-only enforcement (no edit/upload buttons)
7. User confirms navigation between views works smoothly
8. User confirms empty states display appropriately
9. No blocking issues identified during verification
   </success_criteria>

<output>
After completion, create `.planning/phases/02-association-dashboard-view/02-03-SUMMARY.md` documenting:
- Verification results for each test
- Any issues found and their resolutions
- Edge cases tested
- User feedback on UX
- Confirmation that Phase 2 requirements met
</output>
