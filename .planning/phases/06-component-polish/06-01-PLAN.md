---
phase: 06-component-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/ui/badge.tsx
  - components/dashboard/ParentBudgetOverview.tsx
  - components/dashboard/ValidationComplianceCard.tsx
autonomous: true

must_haves:
  truths:
    - Status badges include both icon and text (not icon-only or text-only)
    - Critical status uses red with AlertOctagon icon
    - Warning status uses amber with AlertTriangle icon
    - Healthy status uses green with CheckCircle icon
    - Screen readers announce status context, not just icon name
    - Color-blind users can distinguish status by icon shape
    - All badge text meets WCAG 2.1 AA contrast requirements
  artifacts:
    - path: components/ui/badge.tsx
      provides: Badge component with amber variant (not yellow)
      min_lines: 35
    - path: components/dashboard/ParentBudgetOverview.tsx
      provides: Budget status badges with aria-hidden icons and sr-only text
      contains: 'aria-hidden="true"'
    - path: components/dashboard/ValidationComplianceCard.tsx
      provides: Exception severity badges with accessible icon patterns
      contains: 'aria-hidden="true"'
  key_links:
    - from: components/ui/badge.tsx
      to: amber color variant
      via: CVA variant definition
      pattern: 'bg-amber-100 text-amber-800'
    - from: components/dashboard/ParentBudgetOverview.tsx
      to: screen reader text
      via: sr-only span
      pattern: 'className="sr-only"'
    - from: ValidationComplianceCard
      to: Lucide icons
      via: import and aria-hidden
      pattern: 'aria-hidden="true"'
---

<objective>
Enhance status badges with accessibility features including icons, WCAG 2.1 AA compliant colors, and screen reader support

Purpose: Make status indicators accessible to users with color vision deficiencies and screen reader users by providing redundant visual and textual signaling
Output: Status badges using icon + color + text pattern meeting WCAG 2.1 AA contrast requirements across dashboard components
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/phases/06-component-polish/06-CONTEXT.md
@.planning/phases/06-component-polish/06-RESEARCH.md
@.planning/phases/05-design-foundation/05-02-SUMMARY.md

# Current badge component (has yellow variant, needs amber)

@components/ui/badge.tsx

# Components using status badges (need accessibility enhancements)

@components/dashboard/ParentBudgetOverview.tsx
@components/dashboard/ValidationComplianceCard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update Badge component to use amber instead of yellow</name>
  <files>components/ui/badge.tsx</files>
  <action>
Update the Badge component's warning variant to use amber colors instead of yellow for better distinction from green (color-blind accessibility):

Line 19-20: Change warning variant from:

```
'border-transparent bg-yellow-100 text-yellow-800 hover:bg-yellow-100/80',
```

To:

```
'border-transparent bg-amber-100 text-amber-800 hover:bg-amber-100/80',
```

This aligns with requirements (UX-03 specifies amber) and improves color-blind accessibility (amber is more orange-toned, better visual separation from green).

Do NOT change other variants. Only update the warning variant color from yellow to amber.
</action>
<verify>
Run: `npm run build` to confirm TypeScript compilation succeeds
Check: Badge component exports success, warning, and destructive variants
Confirm: warning variant uses amber-100/amber-800 colors
</verify>
<done>
Badge warning variant uses amber-100 background and amber-800 text
TypeScript builds without errors
Badge component ready for accessible status indicators
</done>
</task>

<task type="auto">
  <name>Task 2: Add accessible status badges to ParentBudgetOverview</name>
  <files>components/dashboard/ParentBudgetOverview.tsx</files>
  <action>
Enhance budget status badges with accessibility features (icon + color + text with screen reader support):

**Line 68-71: Update badge to include aria-hidden and sr-only text:**

Change from:

```tsx
<Badge variant={status.variant} className="flex items-center gap-1">
  <StatusIcon className="h-3 w-3" />
  {status.label}
</Badge>
```

To:

```tsx
<Badge variant={status.variant} className="flex items-center gap-1.5">
  <StatusIcon className="h-3.5 w-3.5" aria-hidden="true" />
  <span className="sr-only">Budget status: </span>
  {status.label}
</Badge>
```

Changes:

- Icon size: h-3 → h-3.5 (12px → 14px) for better visibility
- gap-1 → gap-1.5 for better spacing with larger icon
- Added aria-hidden="true" to icon (decorative, meaning in text)
- Added sr-only span for screen reader context

**Line 42: Update AlertTriangle color reference from yellow to amber:**

Change:

```tsx
color: 'text-yellow-600',
```

To:

```tsx
color: 'text-amber-600',
```

**Line 95: Update progress bar indicator color from yellow to amber:**

Change:

```tsx
? 'bg-yellow-600'
```

To:

```tsx
? 'bg-amber-600'
```

**Line 100: Update percentage text color from yellow to amber:**

Change from:

```tsx
<span className={`text-sm font-semibold ${status.color}`}>
```

To (no change needed, status.color already references the color, but verify amber is used):

The status.color variable will automatically use amber-600 after Line 42 change.

Why these changes:

- aria-hidden on icons prevents screen readers announcing "triangle" without context
- sr-only text provides meaningful context: "Budget status: On Track"
- Larger icons (14px vs 12px) improve visibility and click target size
- Amber replaces yellow per requirements and research recommendations
  </action>
  <verify>
  Run: `npm run build` to confirm TypeScript compilation
  Check: Badge icons have aria-hidden="true" attribute
  Check: sr-only span present with meaningful text
  Check: Icon size is h-3.5 (14px)
  Check: All yellow-600 references changed to amber-600
  </verify>
  <done>
  Budget status badges include icon with aria-hidden, sr-only context text, and amber colors
  Screen readers announce "Budget status: On Track" not just "On Track"
  Icon size upgraded to 14px for better visibility
  WCAG 2.1 AA pattern implemented (icon + color + text)
  </done>
  </task>

<task type="auto">
  <name>Task 3: Add accessible status badges to ValidationComplianceCard</name>
  <files>components/dashboard/ValidationComplianceCard.tsx</files>
  <action>
Add aria-hidden to decorative icons and ensure proper screen reader context:

**Lines 192-209: Add aria-hidden to CheckCircle and AlertTriangle icons:**

Line 192:

```tsx
<CheckCircle className="h-3 w-3 text-green-600" aria-hidden="true" />
```

Line 198:

```tsx
<AlertTriangle className="h-3 w-3 text-yellow-600" aria-hidden="true" />
```

Also change Line 198 yellow-600 to amber-600:

```tsx
<AlertTriangle className="h-3 w-3 text-amber-600" aria-hidden="true" />
```

Line 204:

```tsx
<CheckCircle className="h-3 w-3 text-blue-600" aria-hidden="true" />
```

**Lines 148-157: Update getSeverityIcon function icons to use aria-hidden:**

The function returns icons as JSX. Update each return to include aria-hidden="true":

```tsx
case 'CRITICAL':
  return <XCircle className="w-4 h-4 text-red-600" aria-hidden="true" />
case 'HIGH':
  return <AlertCircle className="w-4 h-4 text-orange-600" aria-hidden="true" />
case 'MEDIUM':
  return <AlertTriangle className="w-4 h-4 text-yellow-600" aria-hidden="true" />
case 'LOW':
  return <AlertCircle className="w-4 h-4 text-blue-600" aria-hidden="true" />
default:
  return <AlertCircle className="w-4 h-4 text-gray-600" aria-hidden="true" />
```

Also update MEDIUM case yellow-600 to amber-600:

```tsx
case 'MEDIUM':
  return <AlertTriangle className="w-4 h-4 text-amber-600" aria-hidden="true" />
```

**Lines 216-258: Add aria-hidden to severity container icons:**

Each severity card (Critical, High, Medium, Low) has icons. Add aria-hidden:

Line 219:

```tsx
<XCircle className="h-4 w-4 text-red-600" aria-hidden="true" />
```

Line 230:

```tsx
<AlertCircle className="h-4 w-4 text-orange-600" aria-hidden="true" />
```

Line 241 (also change yellow to amber):

```tsx
<AlertTriangle className="h-4 w-4 text-amber-600" aria-hidden="true" />
```

Line 243 (also change bg-yellow to bg-amber):

```tsx
<div className="bg-amber-50 border border-amber-200 rounded-lg p-3">
```

Line 244:

```tsx
<span className="text-xs font-medium text-amber-700">Medium</span>
```

Line 247:

```tsx
<span className="text-lg font-bold text-amber-600">
```

Line 252:

```tsx
<AlertCircle className="h-4 w-4 text-blue-600" aria-hidden="true" />
```

Why these changes:

- aria-hidden prevents screen readers announcing "circle" or "triangle" without context
- Text labels ("Critical", "High", "Medium", "Low") provide the actual meaning
- Icons are decorative reinforcement, not primary content
- Amber replaces yellow for consistency with updated Badge component
  </action>
  <verify>
  Run: `npm run build` to confirm TypeScript compilation
  Check: All icon elements include aria-hidden="true"
  Check: All yellow-_ color classes changed to amber-_
  Visual check: Icons render correctly with aria-hidden (no visual change)
  </verify>
  <done>
  All severity icons include aria-hidden="true" attribute
  Screen readers announce severity text ("Critical", "High") not icon names
  Yellow colors replaced with amber for consistency
  WCAG 2.1 AA accessible pattern (icon as decorative, text as content)
  </done>
  </task>

</tasks>

<verification>
**Accessibility Verification:**

1. **Screen Reader Test:**
   - Navigate to association dashboard with screen reader (NVDA or VoiceOver)
   - Verify badges announce meaningful context: "Budget status: On Track"
   - Icons should not be announced separately (aria-hidden working)

2. **Color Contrast Check:**
   - Use WebAIM Contrast Checker or browser DevTools
   - Verify amber-100/amber-800 meets WCAG 2.1 AA (4.5:1 for normal text)
   - Verify green-100/green-800 meets WCAG 2.1 AA
   - Verify red-100/red-800 meets WCAG 2.1 AA

3. **Color-Blind Simulation:**
   - Use browser color-blind simulation (Chrome DevTools > Rendering > Emulate vision deficiencies)
   - Test Protanopia (no red), Deuteranopia (no green), Tritanopia (no blue)
   - Verify icons provide distinguishable shapes regardless of color perception

4. **Visual Regression Check:**
   - Visit dashboard pages: parent dashboard, validation compliance card
   - Verify badges render correctly with icons
   - Verify spacing looks balanced (gap-1.5 with h-3.5 icons)
   - Verify no layout breaks from icon size changes

**Build Verification:**

```bash
npm run build
```

Must succeed with no TypeScript errors.
</verification>

<success_criteria>

- All status badges include icon + color + text (no text-only or icon-only badges)
- Badge warning variant uses amber-100/amber-800 (not yellow)
- All decorative icons have aria-hidden="true" attribute
- All status badges include sr-only context text for screen readers
- Icon size is h-3.5 (14px) across all status indicators
- All yellow color references changed to amber
- TypeScript builds without errors
- Screen readers announce meaningful status context
- Color-blind simulation shows distinguishable icons
- WebAIM contrast check confirms WCAG 2.1 AA compliance for all badge variants
  </success_criteria>

<output>
After completion, create `.planning/phases/06-component-polish/06-01-SUMMARY.md`
</output>
